<!-- author: Bruno Pitteli Gonçalves (scorninpc) -->
<!-- código usado para aprender sobre primeiros passos para desenvolvimento de jogos -->

<!-- jogo breakout do atari -->

<!-- referencias -->
<!-- https://developer.mozilla.org/en-US/docs/Games/Tutorials/2D_Breakout_game_pure_JavaScript -->

<html lang="pt-br">
	<head>
		<meta charset="utf-8" />
		<title>Gamedev Canvas Workshop</title>

		<style>
			* {
				padding: 0;
				margin: 0;
			}
			canvas {
				background: #eeeeee;
			}
			button {
				display: block;
			}
		</style>
	</head>
	<body>
		<canvas id="myCanvas" width="480" height="320"></canvas>
		<button id="runButton">Start game</button>

		<script>
			const canvas = document.getElementById("myCanvas");
			const ctx = canvas.getContext("2d");

			let x = canvas.width / 2;
			let y = canvas.height - 30;

			const ballRadius = 10;

			let dx = 2;
			let dy = -2;

			function drawBall() {
				ctx.beginPath();
				ctx.arc(x, y, ballRadius, 0, Math.PI * 2);
				ctx.fillStyle = "#0095DD";
				ctx.fill();
				ctx.closePath();
			}

			function draw() {

				ctx.clearRect(0, 0, canvas.width, canvas.height);
				
				drawBall();

				x += dx;
				y += dy;

				// coalisão TOP (se a bolinha + movimento for MENOR que 0, fora da tela)
				// ao invez de 0, usamos ballRadius, pois não queremos o HIT no meio da bola, mais sim quando a bola encostar
				if ((y + dy < ballRadius) || (y + dy > canvas.height - ballRadius)) {
					dy = -dy;
				}

				// coalisão LEFT (se a bolinha + movimento for MENOR que a tela de lado, fora da tela)
				// ao invez de 0, usamos ballRadius, pois não queremos o HIT no meio da bola, mais sim quando a bola encostar
				if ((x + dx < ballRadius) || (x + dx > canvas.width - ballRadius)) {
					dx = -dx;
				}

			}

			function startGame() {
				setInterval(draw, 10);
			}

			const runButton = document.getElementById("runButton");
			runButton.addEventListener("click", () => {
				startGame();
				runButton.disabled = true;
			});

		</script>
		
	</body>
</html>